#include colors.yml
#include widgets.yml

Form: !Form
    <<: *form_default

    margins: 5x5x5x5
    
    
motor_grid: !grid

    repeat_over: "MOTORS"
    start_at: 1
    
    aspect_ratio: 2.0
    
    padding: 20
    
    children:
        - !group
            geometry: 160x204
            
            background: $003584
            
            frameShape: QFrame::Box
            lineWidth: 3
            backgroundMode: caFrame::Outline
            
            children:
                - !caCalc
                    variable: "$(P)$(M{N}):HighLimits"
                    calc: "((D=0)&&(B=1))*3+A*(B=1)+2*C"
                    channel: "$(P)$(M{N}).LVIO"
                    channelB: "$(P)$(M{N}).DIR"
                    channelC: "$(P)$(M{N}).HLS"
                    channelD: "$(P)$(M{N}).DMOV"
                    
                    eventSignal: caCalc::onAnyChange
                    
                    geometry: 0x0 x 0x0
                    
                - !caCalc
                    variable: "$(P)$(M{N}):LowLimits"
                    calc: "((D=0)&&(B=1))*3+A*(B=1)+2*C"
                    channel: "$(P)$(M{N}).LVIO"
                    channelB: "$(P)$(M{N}).DIR"
                    channelC: "$(P)$(M{N}).LLS"
                    channelD: "$(P)$(M{N}).DMOV"
                    
                    eventSignal: caCalc::onAnyChange
                    
                    geometry: 0x0 x 0x0
                
                
                - !caLineEdit
                    background: *header_blue
                    foreground: *white
                    colorMode: caLineEdit::Static
                    
                    geometry: 3x1 x 154x21
                    
                    channel: "$(P)$(M{N}).DESC"
                    
                    
                - !caRelatedDisplay
                    background: *edit_blue
                    foreground: *black
                    
                    geometry: 10x30 x 140x17
                    label: "-($(P)$(M{N}))"
                    
                    stackingMode: !enum Menu
                    
                    labels: "Help;More;Setup;All;Setup Scan Parameters"
                    files: "motorx_help.ui;motorx_more.ui;motorx_setup.ui;motorx_all.ui;scanParms.ui"
                    args: "P=$(P),M=$(M{N});P=$(P),M=$(M{N});P=$(P),M=$(M{N});P=$(P),M=$(M{N});P=$(P),Q=$(M{N}),PV=$(M{N})"
                    removeParent: "false;false;false;false;false"
                    
                    
                - !caLineEdit
                    background: *transparent
                    foreground: *header_blue
                    colorMode: caLineEdit::Static
                    
                    geometry: 20x50 x 120x17
                    alignment: Qt::AlignAbsolute|Qt::AlignHCenter|Qt::AlignVCenter
                    
                    channel: "$(P)$(M{N}).EGU"
                
        
                - !caMessageButton
                    background: *edit_blue
                    colorMode: caMessageButton::Static
                    
                    geometry: 10x140 x 24x24
                    pressMessage: "1"
                    channel: "$(P)$(M{N}).TWR"
                    label: "<"
                    
                - !caTextEntry
                    background: *edit_blue
                    colorMode: caLineEdit::Static
                    
                    geometry: 38x142 x 85x24
                    
                    channel: "$(P)$(M{N}).TWV"
                
                - !caMessageButton
                    background: *edit_blue
                    colorMode: caMessageButton::Static
                    
                    geometry: 126x140 x 24x24
                    pressMessage: "1"
                    channel: "$(P)$(M{N}).TWF"
                    label: ">"
        
                    
                - !caMessageButton
                    background: *alarm_red
                    foreground: *alarm_yellow
                    colorMode: caMessageButton::Static
                    
                    geometry: 10x170 x 140x26
                    channel: "$(P)$(M{N}).STOP"
                    pressMessage: "1"
                    label: "STOP"
                    
                
                - !group
                    channel: "$(P)$(M{N}):LowLimits"
                    visibility: caFrame::IfNotZero
                    
                    geometry: 10x50 x 6x88
                    
                    children:
                
                        - !caLed
                            channel: "$(P)$(M{N}):LowLimits"
                            falseColor: *alarm_yellow
                            trueColor: *alarm_red
                            undefinedColor: *alarm_green
                            
                            borderColor: *transparent
                            
                            rectangular: true
                            scaleContents: true
                            gradientEnabled: false
                            
                            trueValue: 2
                            falseValue: 1
                            
                            geometry: 0x0 x 6x88
                
                - !group
                    channel: "$(P)$(M{N}):HighLimits"
                    visibility: caFrame::IfNotZero
                    
                    geometry: 144x50 x 6x88
                    
                    children:
                        - !caLed
                            channel: "$(P)$(M{N}):HighLimits"
                            falseColor: *alarm_yellow
                            trueColor: *alarm_red
                            undefinedColor: *alarm_green
                            
                            borderColor: *transparent
                            
                            rectangular: true
                            scaleContents: true
                            gradientEnabled: false
                            
                            trueValue: 2
                            falseValue: 1
                            
                            geometry: 0x0 x 6x88
                    
                    
                - !group
                    background: *black
                    backgroundMode: caFrame::Filled
                    visibilityMode: caFrame::Background
                    visibility: caFrame::IfNotZero
                    
                    channel: "$(P)$(M{N}).SET"
                    
                    geometry: 18x65 x 124x35
                    
                    
                    children:
                        
                        - !group
                            background: *alarm_yellow
                            
                            backgroundMode: caFrame::Filled
                            visibilityMode: caFrame::Background
                            visibility: caFrame::IfNotZero
        
                            channel: "$(P)$(M{N}).SET"
                            
                            geometry: 2x2 x 120x31
                            
                            children:
                                
                                - !caLineEdit
                                    background: *gray_lighter
                                    foreground: *header_blue
                                    
                                    colorMode: caLineEdit::Static
                                    
                                    channel: "$(P)$(M{N}).RBV"
                                    
                                    geometry: 2x2 x 116x27
                    
                - !group
                    background: *alarm_red
                    
                    backgroundMode: caFrame::Filled
                    visibilityMode: caFrame::Background
                    visibility: caFrame::IfNotZero
                    
                    channel: "$(P)$(M{N})_able.VAL"
                    
                    geometry: 18x100 x 124x35
                    
                    
                    children:
                        
                        - !group
                            background: *black
                            
                            backgroundMode: caFrame::Filled
                            visibilityMode: caFrame::Background
                            visibility: caFrame::IfNotZero
                            
                            channel: "$(P)$(M{N})_able.VAL"
                            
                            frameShape: QFrame::NoFrame
                            lineWidth: 1
                            
                            geometry: 3x3 x 118x29
                    
                            children:
                                
                                - !caTextEntry
                                    background: *edit_blue
                                    foreground: *black
                                    colorMode: caLineEdit::Static
                                    
                                    geometry: 2x2 x 114x25
                                
                                    channel: "$(P)$(M{N}).VAL"
